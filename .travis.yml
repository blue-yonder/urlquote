matrix:
  include:
  - language: python
    python: 2.7
  - language: python
    python: 3.5
  - language: python
    python: 3.6
  - language: generic
    python: 3.6
    os: osx
install:
- curl curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain stable
- export PATH="$HOME/.cargo/bin:$PATH"
- rustc -V
- pip install -r requirements.txt
- pip install -r requirements-test.txt
script:
- python setup.py sdist bdist_wheel
- pip install -e .
- pytest test.py
notifications:
  email: false
deploy:
  provider: pypi
  user: __token__
  on:
    tags: true
  distributions: sdist bdist_wheel
  skip_existing: true
  skip_cleanup: true
